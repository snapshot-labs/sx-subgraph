specVersion: 0.0.2
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum
    name: ProxyFactory
    network: goerli
    source:
      address: '0x12A1FfFFfd70677939D61d641eA043bc9060c718'
      abi: ProxyFactory
      startBlock: 8698550
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - SpaceCreated
      abis:
        - name: ProxyFactory
          file: ./abis/ProxyFactory.json
        - name: AvatarExecutionStrategy
          file: ./abis/AvatarExecutionStrategy.json
        - name: TimelockExecutionStrategy
          file: ./abis/TimelockExecutionStrategy.json
      eventHandlers:
        - event: ProxyDeployed(address,address)
          handler: handleProxyDeployed
      file: ./src/mapping.ts
templates:
  - kind: ethereum
    name: Space
    network: goerli
    source:
      abi: Space
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - ProposalCreated
        - VoteCreated
        - MetadataUriUpdated
      abis:
        - name: Space
          file: ./abis/Space.json
      eventHandlers:
        - event: SpaceCreated(address,address,uint32,uint32,uint32,(address,bytes),string,(address,bytes)[],string[],address[])
          handler: handleSpaceCreated
        - event: ProposalCreated(uint256,address,(uint32,uint32,uint32,uint32,bytes32,address,address,uint8,(address,bytes)[]),string,bytes)
          handler: handleProposalCreated
        - event: ProposalExecuted(uint256)
          handler: handleProposalExecuted
        - event: VoteCast(uint256,address,uint8,uint256)
          handler: handleVoteCreated
        - event: MetadataURIUpdated(string)
          handler: handleMetadataUriUpdated
      file: ./src/mapping.ts
  - kind: ethereum
    name: TimelockExecutionStrategy
    network: goerli
    source:
      abi: TimelockExecutionStrategy
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - ProposalExecuted
      abis:
        - name: TimelockExecutionStrategy
          file: ./abis/TimelockExecutionStrategy.json
      eventHandlers:
        - event: ProposalExecuted(bytes32)
          handler: handleTimelockProposalExecuted
      file: ./src/mapping.ts
